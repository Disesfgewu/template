## 4-1 數字的分群方法

- 依照 bits 的高位元做分群

## 4-2 網際網路位址定址法

- 利用網際網路的位元數，每八個 bits 為一組，轉化為十進制後即為網路設備位址，通常以 IPv4 為例會有 32 位元

## 4-3 分級網路定址方式

- 初期：在 32 bits 中，前 8 bits 為網路位址 (netid)，其餘為主機位址 (hostid)。

- 後期：在 TCP/IP 設計者依據網路的大小分成五個類型，以更有效的管理 IP 位址與分類。

    - 1. Class A 第一個 byte 為網路位址，其餘為主機位址，第一個 bit 定義為 0，占總空間 1/2
    - 2. Class B 前兩個 bytes 為網路位址，其餘為主機位址，前兩個 bits 定義為 10，占總空間 1/4
    - 3. Class C 前三個 bytes 為網路位址，其餘為主機位址，前三個 bits 定義為 110，占總空間 1/8
    - 4. Class D (特殊用途時使用) 前四個 bits 定義為 1110 ，其餘為群播位址，占總空間 1/16 
    - 5. Class E (特殊用途時使用) 前四個 bits 定義為 1111 ，其餘為未來保留位址，占總空間 1/16

## 4-4 傳遞模式與接受封包之依據

- 單點傳播：點對點的通訊。例：Google 搜尋資料
- 群播：一對多的通訊。例：網路視訊會議
- 廣播：一對全部。例：電腦教室廣播電腦

- 處理方式：
    - 1. 目的與本機位址相同，採用點對點
    - 2. 目的為群播位址，而本機亦屬於群播成員，傳輸，反之捨棄封包
    - 3. 目的為廣播位址，所有設備網卡都需接收並處理封包
    
## 4-5 特殊用途之位址

- 特殊位址
    - 1. 全 0 ： 本機
    - 2. 網路位址全為 0 ：在此網路下的 "主機"
    - 3. 全 1 ： 區域性廣播
    - 4. 主機位址全為 0 ：指這個網路
    - 5. 主機位址全為 1 ：指這個網路的廣播
    - 6. 127.0.0.1 (127 開頭 後面任意數皆可)：對網卡做測試

- 私有 IP 位址：因 IP 有限，TCP 中以區段定義的不同位址，區段可由企業或團隊內部使用，無需申請，私有 IP 不能直接與外部 (公開 IP 位址) 通訊，可透過轉換進行間接通訊，例如 "網路位址轉換協定"。

    例：172.16.0.0 ~ 172.16.255.255
，區段為 172.16。

## 4-6 網路遮罩

- 網路遮罩：網路分級的運算方式需要的邏輯資訊 ( 4-3 )

- 先定義分級中的網路遮罩 ( 例：Class A 為 11111111.0000000.00000000.0000000 (2) = 255.0.0.0 (10) ， 依此類推 )，將設備之 IP 位址與網路遮罩做 AND，即為設備的網路位址。

## 4-7 子網路 ( Subnet )

- 定義：當有一個較大的網路使得所有主機都連結到此網路，在傳輸較大量的檔案時可能會影響整體網路的速度，為防此狀況，可將大型網路切割為為數個網路，此網路即為子網路。

- IP：保留原網路之網路位址 (netid)，從原有之主機位址的部分借用幾個位元當子網路位元合併後重新定義為子網路 IP 。

## 4-8 子網路遮罩

- 定義：與網路遮罩類似，相同計算原理，可透過主機位址的需求個數當成推算之依據。

- 由主機位址需求推算：
    - 在一個 Class C 中切出每個子網路有 8 個 IP：主機位址共 8 個 bits，所需 8 個即需要 $\log_2(8) = 3$ 個 bits，所以可以切出 $\ 2^5 = 32 $ 個子網路。

    - Class A , Class B 依此類推

- 由子網路位址需求推算：
    
    - 將一個 Class C 切成 32 個子網路：找 $\log_2(32) = 5$ 個 bits，所以有 $\ 2^3 = 8$ 個 IP。

    - 依此類推

## 4-9 子網路的實際應用

- 對於一個具有固接式網路的企業而言，對外的網路至少會有一個路由器負責所有進出資料的轉送，而轉送的意義在於該路由器必須負責將進入的封包先進行解封裝，再重新封裝，從另一個介面送出去。

## 4-10 切割不均等大小的子網路

- 例：倘若要將 192.168.1.0/24 網路依序要分配 32、32、32、16、16、8 等六個大小不同的網路，請依序列出每一個網路名稱、廣播位址與可用 IP 位址區段。

- 說明：
    - 1. 求 IP 數量總和與子網路：32+32+32+16+16+8 = 136，因為 128 < 136 < 256，以 255 為網路遮罩。
    - 2. Class C 之子網路名稱第四個數字必能被網路大小所整除，例：網路大小為 16 ， 子網路名稱必為 0 , 16 , 32 ... 其中之一。
    -    | 序號 | 子網路大小 | 子網路 | 可用 IP 位址 | 廣播位址 |
         | - | -- | -------------- | -------------------------- | ------------ |
         | 1 | 32 | 192.168.1.0/27 | 192.168.1.1 ~ 192.168.1.30 | 192.168.1.31 |
         | 2 | 32 | 192.168.1.32/27 | 192.168.1.33 ~ 192.168.1.62 | 192.168.1.63 |
         | 3 | 32 | 192.168.1.64/27 | 192.168.1.65 ~ 192.168.1.94 | 192.168.1.95 |
         | 4 | 16 | 192.168.1.96/28 | 192.168.1.97 ~ 192.168.1.110 | 192.168.1.111 |
         | 5 | 16 | 192.168.1.112/28 | 192.168.1.113 ~ 192.168.1.126 | 192.168.1.127 |
         | 6 | 8 | 192.168.1.128/29 | 192.168.1.129 ~ 192.168.1.134 | 192.168.1.135 |

## 4-11 超網路

- 定義：與子網路切割相反，為合併網路

- 功能：倘若需要的 IP 位址比一個 256 IP 的 Class C 還多時，可合併，例：203.204.2.0/24、203.204.3.0/24 -> 203.204.2.0/23 

## 4-12 不分級網路

- 定義：透過分級網路的 IP 分配會造成很多 IP 位址被浪費，例如需求為 500 個 IP 給 Class C 太少 Class B 太多，所以使用了子網路與超網路兩個方法來解決這個問題，稱為不分級網路。
