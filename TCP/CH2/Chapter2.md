## 2-1 分層概念

- 分層：藉由介面隔開的切割為各種層次，層與層之間的溝通稱為對等交談 (P2P) ，使用的語言稱為協定 (Protocol)。

## 2-2 ISO OSI 七層網路模型

- 實體層：實體物件 + 介質 + 訊號
    
    - 功能：
    - 1. 傳遞訊號的介質規格：線材、電波、紅外線等相關設備規格
    - 2. 訊號的編碼與轉換：將不同的傳輸介質傳送之訊號轉換成電腦使用之數位訊號或裝置之使用訊號

- 資料鏈結層：與第一層 (實體層) 相關性極高，使用不同的實體層，對於介質存取控制 (MAC) 的方式也有所不同，在 TCP/IP 中可視為同一層

    - 功能：
    - 1. 介質存取控制方法：不同的傳輸介質所使用之訊號有所不同，利用 FDDI 之光纖材質考慮的是光學脈衝如何不使傳入與輸出的訊號彼此干擾。Token Ring 是藉由 Token 的取得以避免碰撞。乙太網路利用碰撞偵測 (CSMA/CD)。不同的實體層訊號技術會影響資料鏈結層的處理方式。
    - 2. 定址：只要是透過實體層與資料鏈結層的通訊結構，必為 LAN 之網路設備，僅由此二層連結之設備可分為直接相連與點對點相連。點對點相連需透過廣播 (Broadcast) 來尋找設備，故每個設備均會具備一個獨一無二的實體位址 (Physical Address) 或是 MAC 位址。MAC 為 48 bits 所組成，以 16 進制來表示，廣播位元組為 FF:FF:FF:FF:FF:FF (一組 FF 為一位元組)，前三位元組為 IEEE 之分配代碼，其餘為廠商自訂流水號。

- 網路層：定址 + 路由，資料傳輸之過程所需之資訊與技術

    - 功能：
    - 1. 定址：在資料傳輸時需要加上自己的位址與目的地之位址，以方便傳輸接收與回應資訊
    - 2. 路由：在起點與終點間尋找最佳與最短路徑。

- 傳輸層：
    
    - 功能：
    - 1. 編訂序號：將大量資料切割成小片段並透過網路層之功能傳送到目的地再重組成員資料。
    - 2. 流量控制：在主機對主機 (Host to Host)的通訊中，當大量資料湧入接收端又無法同時處理所有資料時，接收端會丟棄部分資訊而導致資料不完整，以防發生，接收與傳輸端會協商傳送的速度，稱為流量控制 (Flow control)。
    - 3. 可靠性與效率性：可靠性與效率性兩者是互相牴觸的，傳輸層所傳輸的資料有兩種，需要取得正確性資料時，傳輸層可以依據編訂序號確認與要求缺失的資料重送，以達到可靠性，例：TCP。反之為講求網路通訊效率性，例：UDP、電話。

- 會議層：處理連線功能

    - 功能：
    - 1. 單工：單方面傳輸。例：電台與收音機。
    - 2. 半雙工：雙面傳輸，但不可同時。例：對講機。
    - 3. 全雙工；雙面傳輸，可同時。例：電話。

- 表現層：轉換訊號編碼成使用者看得懂的模式即將使用者傳輸之資料轉換為訊號編碼，以及壓縮、加密等功能

    - 功能：
    - 1. 編碼與轉碼：例：ASCII code、Unicode。
    - 2. 壓縮與解壓縮：在傳輸時因資料龐大難以傳輸時將資料壓縮以節省時間。例：網路電話。
    - 3. 加密與解密：加密資料與傳輸。

- 應用層：能夠直接由使用者操作的應用程式，大多為應用層（非全部）

- 傳輸資料型態整理：
    - 應用層：資料/訊息 (data/message)
    - 傳輸層：區段 (segment)
    - 網路層：封包 (package)
    - 資料鏈結層：訊框 (frame)
    - 實體層：位元 (bit)

- 上下層關係（介面）：
    - 封裝：將資料由上至下傳遞會進行封裝的動作，會加上這上層的資訊（傳送端）於資料前方，稱為表頭 (header)，廣義上有加表頭的資訊都曾為封裝，不限定在應用層。
    - 解封裝：當下層接收資料後會去除表頭，稱為解封裝。

## 2-3 ISO OSI 七層模型與 TCP/IP 協定組

- TCP/IP：TCP 分成四層，分別對應   
    - 1. 鏈結層：實體層 + 資料鏈結層
    - 2. 網際網路層：網路層
    - 3. 傳輸層：傳輸層
    - 4. 應用層：會議層 + 表現層 + 應用層

- 同層之間的對等關係：在不同端，相同層之間需要使用相同的語言，稱為協定 (Protocol)。
    - 1. 應用層：HTTP/FTP/...
    - 2. 傳輸層：TCP/UDP
    - 3. 網際網路層：Internet protocol
    - 4. 鏈結層：Ethernet protocol

    一般來說，瀏覽器至網頁服務連線過程中，會由使用者端之應用層向下至鏈結層進行封裝傳輸至網頁服務端之鏈結層，再解封裝至網頁端之應用層。

## 2-4 網路相關設備與網路線

- 中繼器：增強網路傳輸訊號以延伸距離，位於實體層。

- 集線器：用於連結多台裝置，容易造成網路堵塞與訊號碰撞，位於實體層。

- 橋接器：串接兩個或多個實體網路，經過發現、過濾、轉送三個步驟進行資料的串接與發送，位於資料鏈結層。

- 交換器：可視為多個橋接器接在一起，以增加串接的數目，通常具有兩種方式，位於資料鏈結層。
    - 1. store and forward：當資料被傳送者傳送至中間站台或節點時，會先儲存資料並等資料完全到達後再傳輸，可確保完整性。
    - 2. cut through：將資料切割為訊框後分別且直接傳輸，可增加效率，但降低可靠性。

- 路由器：一個路由器可連結多個網路 (實體+邏輯網路)，透過網路定址的方式區分大小網路並連結。路由器位於網路層，會將不必要之資訊過濾，不至於影響其他網路，可避免廣播風暴。

- 網路線：乙太網路線，通常有 568A 、 568B ，兩種線，有兩種方式可以連結設備
    - 1. Straight-Through：用同一條線，不同設備時使用
    - 2. Crossover：用不同條線，相同設備時使用